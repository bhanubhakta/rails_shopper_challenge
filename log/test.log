  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "applicants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "region" varchar, "phone" varchar, "email" varchar, "phone_type" varchar, "source" varchar, "over_21" boolean, "reason" text, "workflow_state" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (1.3ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150108011628')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:18:29.081048"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:18:29.085265"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:18:29.094669"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:18:29.099777"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:18:29.112419"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:18:29.116278"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:18:29.120392"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:18:29.124853"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:19:12.452635"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:19:12.456271"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:19:12.459079"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:19:12.461775"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:19:12.472178"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:19:12.475983"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:19:12.480374"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:19:12.485157"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:19:56.894780"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:19:56.898043"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:19:56.900796"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:19:56.903176"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:19:56.913829"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:19:56.916834"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:19:56.919707"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:19:56.922353"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:20:16.239627"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:20:16.242538"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:20:16.245515"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:20:16.248593"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:20:16.258004"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:20:16.260771"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:20:16.265185"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:20:16.268612"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 19:20:16.296364"], ["updated_at", "2017-06-04 19:20:16.296364"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 19:20:16.299415"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 19:20:16.319155"], ["updated_at", "2017-06-04 19:20:16.319155"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 19:20:16.320461"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "applicants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "region" varchar, "phone" varchar, "email" varchar, "phone_type" varchar, "source" varchar, "over_21" boolean, "reason" text, "workflow_state" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "funnel_batches" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "start_date" date, "end_date" date, "range" varchar, "applied" integer, "quiz_started" integer, "quiz_completed" integer, "onboarding_requested" integer, "onboarding_completed" integer, "hired" integer, "rejected" integer) 
  [1m[36m (1.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.9ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170604192424')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150108011628')
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:46:14.851996"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:46:14.855835"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:46:14.858366"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:46:14.861017"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35m (0.2ms)[0m  SELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_start, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants WHERE updated_at between date('2015-12-01') and date('2015-12-28') GROUP by strftime('%W', updated_at)
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 19:46:14.878971"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 19:46:14.884537"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 19:46:14.891582"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 19:46:14.896211"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36m (0.3ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_start, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants WHERE updated_at between date('2015-12-01') and date('2015-12-28') GROUP by strftime('%W', updated_at)[0m
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.3ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 19:46:14.945817"], ["updated_at", "2017-06-04 19:46:14.945817"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 19:46:14.948570"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 19:46:14.976514"], ["updated_at", "2017-06-04 19:46:14.976514"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 19:46:14.979415"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.4ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:03:14.866019"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:03:14.869441"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:03:14.871910"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:03:14.874702"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:03:14.884612"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:03:14.888029"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:03:14.891211"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:03:14.893540"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:03:14.920897"], ["updated_at", "2017-06-04 20:03:14.920897"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:03:14.922340"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:03:14.947269"], ["updated_at", "2017-06-04 20:03:14.947269"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:03:14.948780"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:03:23.890900"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:03:23.895893"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:03:23.900472"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:03:23.904899"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:03:23.947103"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:03:23.950524"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:03:23.953808"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:03:23.957346"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:03:23.998014"], ["updated_at", "2017-06-04 20:03:23.998014"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:03:23.999613"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:03:24.028363"], ["updated_at", "2017-06-04 20:03:24.028363"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:03:24.031064"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:03:39.463924"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:03:39.468765"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:03:39.472923"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:03:39.477052"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.2ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:03:39.529392"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:03:39.534553"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:03:39.542308"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:03:39.549058"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:03:39.598828"], ["updated_at", "2017-06-04 20:03:39.598828"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:03:39.601058"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.4ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:03:39.640211"], ["updated_at", "2017-06-04 20:03:39.640211"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:03:39.642841"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:04:58.919901"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:04:58.922771"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:04:58.925062"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:04:58.927525"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:04:58.933204"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:04:58.936127"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:04:58.938401"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:04:58.940617"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:04:58.964130"], ["updated_at", "2017-06-04 20:04:58.964130"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:04:58.965804"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:04:58.988037"], ["updated_at", "2017-06-04 20:04:58.988037"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:04:58.989854"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:05:45.126435"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:05:45.130015"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:05:45.132502"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:05:45.135263"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:05:45.141009"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:05:45.143547"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:05:45.145930"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:05:45.149547"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:05:45.178495"], ["updated_at", "2017-06-04 20:05:45.178495"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:05:45.181822"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:05:45.203113"], ["updated_at", "2017-06-04 20:05:45.203113"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:05:45.204440"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.4ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:06:53.954232"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:06:53.957351"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:06:53.960153"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:06:53.962559"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:06:53.967735"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:06:53.970511"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:06:53.972869"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:06:53.975154"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:06:53.998724"], ["updated_at", "2017-06-04 20:06:53.998724"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:06:54.000560"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:06:54.019916"], ["updated_at", "2017-06-04 20:06:54.019916"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:06:54.022136"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:07:22.750222"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:07:22.754899"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:07:22.758259"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:07:22.761035"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:07:22.822381"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:07:22.825033"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:07:22.827517"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:07:22.830067"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:07:22.866805"], ["updated_at", "2017-06-04 20:07:22.866805"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:07:22.868323"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:07:22.886636"], ["updated_at", "2017-06-04 20:07:22.886636"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:07:22.888056"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:08:41.295819"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:08:41.298858"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:08:41.301058"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:08:41.303317"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35m (16.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:08:41.351470"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:08:41.354876"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:08:41.357651"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:08:41.361611"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.3ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:08:41.403186"], ["updated_at", "2017-06-04 20:08:41.403186"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:08:41.405636"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:08:41.430920"], ["updated_at", "2017-06-04 20:08:41.430920"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:08:41.432467"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.000386"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.005523"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.008637"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.012950"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.057489"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.061742"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.064907"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.067282"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.076248"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.079290"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.082649"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.085436"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.093957"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.098330"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.101859"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:17:05.107314"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:17:05.141711"], ["updated_at", "2017-06-04 20:17:05.141711"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:17:05.144669"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:17:05.169432"], ["updated_at", "2017-06-04 20:17:05.169432"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:17:05.173533"], ["id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.625671"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.628798"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.631037"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.633734"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.667319"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.670081"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.672557"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.675359"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.682914"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.685826"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.688166"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:17:35.690888"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:17:43.938644"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:17:43.941842"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:17:43.945122"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:17:43.951408"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:17:43.992837"], ["updated_at", "2017-06-04 20:17:43.992837"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:17:43.994666"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:17:44.020189"], ["updated_at", "2017-06-04 20:17:44.020189"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:17:44.022332"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.711895"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.717741"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.722764"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.728039"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.5ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.2ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.785168"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.790332"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.795868"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.801049"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.813806"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.820035"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.827639"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.833600"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.862818"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.868697"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.873496"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:18:27.879973"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.6ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:18:27.967877"], ["updated_at", "2017-06-04 20:18:27.967877"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:18:27.971088"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:18:28.015021"], ["updated_at", "2017-06-04 20:18:28.015021"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:18:28.018498"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.6ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.736810"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.739841"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.742282"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.744697"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.778348"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.781709"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.785238"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.788068"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.796563"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.800205"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.802994"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.809586"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.826213"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.829337"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.832697"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:18:45.836591"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:19:32.290921"], ["updated_at", "2017-06-04 20:19:32.290921"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:19:32.292520"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.3ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:19:32.314820"], ["updated_at", "2017-06-04 20:19:32.314820"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:19:32.316336"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.441737"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.445098"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.447932"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.450906"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.486960"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.490118"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.492813"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.496124"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.504413"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.507824"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.510749"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.514223"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.531778"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.534301"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.536736"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:19:36.539127"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:19:36.568861"], ["updated_at", "2017-06-04 20:19:36.568861"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:19:36.571157"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:19:36.591860"], ["updated_at", "2017-06-04 20:19:36.591860"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:19:36.593545"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.799246"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.802182"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.804704"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.806899"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.837920"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.840870"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.843260"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.846203"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.854478"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.857394"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.859725"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.862567"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.877706"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.880464"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.883076"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:19:47.886293"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:19:47.914547"], ["updated_at", "2017-06-04 20:19:47.914547"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:19:47.916232"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:19:47.935232"], ["updated_at", "2017-06-04 20:19:47.935232"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:19:47.936777"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.676921"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.683989"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.689117"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.694363"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.2ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.753467"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.762476"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.768278"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.773449"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.790641"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.797088"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.802884"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.808804"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.843393"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.852908"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.872597"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:20:02.886231"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mApplicant Load (0.1ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:20:24.114676"], ["updated_at", "2017-06-04 20:20:24.114676"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:20:24.117147"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:20:24.139818"], ["updated_at", "2017-06-04 20:20:24.139818"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:20:24.142123"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.598959"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.602597"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.605226"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.607798"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.643929"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.647244"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.650156"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.653073"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.662034"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.665306"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.667698"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.670646"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.686579"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.689500"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.693523"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:20:34.697138"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (3.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.3ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:22:55.352532"], ["updated_at", "2017-06-04 20:22:55.352532"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:22:55.356731"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (3.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:22:55.386055"], ["updated_at", "2017-06-04 20:22:55.386055"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:22:55.387579"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.350430"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.353457"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.355875"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.358448"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.2ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.2ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.396484"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.399712"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.402342"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.406165"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.414066"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.417386"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.420978"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.0ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.423645"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.429202"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.431891"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.434404"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:22:59.437056"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:23:03.760192"], ["updated_at", "2017-06-04 20:23:03.760192"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:23:03.763348"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:23:03.794719"], ["updated_at", "2017-06-04 20:23:03.794719"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:23:03.797706"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.326299"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.329405"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.331690"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.334297"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.2ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.374619"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.380533"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.383944"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.391426"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.4ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.402307"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.411431"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.416804"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.423354"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.432125"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.437736"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.441668"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:23:22.445680"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:23:22.487779"], ["updated_at", "2017-06-04 20:23:22.487779"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:23:22.489945"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:23:22.519034"], ["updated_at", "2017-06-04 20:23:22.519034"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:23:22.521880"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (5.3ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.466080"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.471574"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.475026"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.478271"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.522486"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.526811"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.530878"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.534221"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.542529"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.545396"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.548023"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.551763"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.560358"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.564017"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.566892"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:25:32.573120"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:25:32.612356"], ["updated_at", "2017-06-04 20:25:32.612356"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:25:32.614191"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.1ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:25:32.635662"], ["updated_at", "2017-06-04 20:25:32.635662"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:25:32.637287"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.265674"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.270686"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.275391"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.280092"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT date(updated_at, 'weekday 0', '-6 days') || '-' || date(updated_at, 'weekday 0') as week_range, updated_at as week_start, date(updated_at, 'weekday 0') as week_end, count(CASE WHEN workflow_state='applied' THEN 1 END) as applied, count(CASE WHEN workflow_state='quiz_started' THEN 1 END) as quiz_started, count(CASE WHEN workflow_state='quiz_completed' THEN 1 END) as quiz_completed, count(CASE WHEN workflow_state='onboarding_requested' THEN 1 END) as onboarding_requested, count(CASE WHEN workflow_state='onboarding_completed' THEN 1 END) as onboarding_completed, count(CASE WHEN workflow_state='hired' THEN 1 END) as hired, count(CASE WHEN workflow_state='rejected' THEN 1 END) as rejected FROM applicants GROUP by strftime('%W', updated_at)[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-02' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-02"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-06"], ["range", "2015-11-30-2015-12-06"], ["applied", 1], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFunnelBatch Load (0.1ms)[0m  [1mSELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "funnel_batches" ("start_date") VALUES (?)[0m  [["start_date", "2015-12-10"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?  [["end_date", "2015-12-13"], ["range", "2015-12-07-2015-12-13"], ["applied", 0], ["quiz_started", 1], ["quiz_completed", 0], ["onboarding_requested", 0], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT  "funnel_batches".* FROM "funnel_batches" WHERE "funnel_batches"."start_date" = '2015-12-20' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "funnel_batches" ("start_date") VALUES (?)  [["start_date", "2015-12-20"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "funnel_batches" SET "end_date" = ?, "range" = ?, "applied" = ?, "quiz_started" = ?, "quiz_completed" = ?, "onboarding_requested" = ?, "onboarding_completed" = ?, "hired" = ?, "rejected" = ? WHERE "funnel_batches"."id" = ?[0m  [["end_date", "2015-12-20"], ["range", "2015-12-14-2015-12-20"], ["applied", 0], ["quiz_started", 0], ["quiz_completed", 0], ["onboarding_requested", 2], ["onboarding_completed", 0], ["hired", 0], ["rejected", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[36mFunnelBatch Load (0.2ms)[0m  [1mSELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')[0m
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 0.2ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.336437"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.360466"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.364947"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.369877"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-01", "end_date"=>"2015-12-28"}
  [1m[35mFunnelBatch Load (0.1ms)[0m  SELECT "funnel_batches".* FROM "funnel_batches" WHERE (start_date >= '2015-12-01' AND end_date <= '2015-12-28')
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.382428"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.4ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.387858"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.393560"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.397339"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhanu@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3211' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bhanu Bhakta"], ["last_name", "Sigdel"], ["email", "bsbhanu@gmail.com"], ["phone", "-3211"], ["phone_type", "iPhone 6/6 Plus"], ["workflow_state", "applied"], ["region", "Boston"], ["updated_at", "2015-12-02 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.408874"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbhan@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3212' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pradeep"], ["last_name", "Bogati"], ["email", "bsbhan@gmail.com"], ["phone", "-3212"], ["phone_type", "iPhone 6s/6s Plus"], ["workflow_state", "quiz_started"], ["region", "Boston"], ["updated_at", "2015-12-10 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.413741"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbha@gmail.com' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3213' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "Bibas"], ["last_name", "Singh"], ["email", "bsbha@gmail.com"], ["phone", "-3213"], ["phone_type", "iPhone 5/5S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-15 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.419404"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'bsbh@gmail.com' LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = '-3214' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "applicants" ("first_name", "last_name", "email", "phone", "phone_type", "workflow_state", "region", "updated_at", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Pukar"], ["last_name", "Mainali"], ["email", "bsbh@gmail.com"], ["phone", "-3214"], ["phone_type", "iPhone 4/4S"], ["workflow_state", "onboarding_requested"], ["region", "Boston"], ["updated_at", "2015-12-20 00:00:00.000000"], ["created_at", "2017-06-04 20:27:07.424055"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FunnelsController#index as JSON
  Parameters: {"start_date"=>"2015-12-28", "end_date"=>"2015-12-01"}
Completed 422 Unprocessable Entity in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Load (0.2ms)[0m  [1mSELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2017-06-04 20:27:07.487037"], ["updated_at", "2017-06-04 20:27:07.487037"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "applicants" SET "email" = ?, "updated_at" = ? WHERE "applicants"."id" = ?  [["email", "an arbitrary value"], ["updated_at", "2017-06-04 20:27:07.490673"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mApplicant Load (0.2ms)[0m  SELECT  "applicants".* FROM "applicants"  ORDER BY "applicants"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "applicants" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2017-06-04 20:27:07.521171"], ["updated_at", "2017-06-04 20:27:07.521171"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "applicants" SET "phone" = ?, "updated_at" = ? WHERE "applicants"."id" = ?[0m  [["phone", "an arbitrary value"], ["updated_at", "2017-06-04 20:27:07.523693"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'an arbitrary value' LIMIT 1
  [1m[36mApplicant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.2ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" = 'AN ARBITRARY VALUE' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mApplicant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "applicants" WHERE "applicants"."email" IS NULL LIMIT 1[0m
  [1m[35mApplicant Exists (0.1ms)[0m  SELECT  1 AS one FROM "applicants" WHERE "applicants"."phone" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
